<!-- 
Copyright 2019 The Cloud-Barista Authors.
Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at
    http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.

----
Copyright for OpenLayers (https://openlayers.org/)

BSD 2-Clause License

Copyright 2005-present, OpenLayers Contributors
All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:

1. Redistributions of source code must retain the above copyright notice, this
   list of conditions and the following disclaimer.

2. Redistributions in binary form must reproduce the above copyright notice,
   this list of conditions and the following disclaimer in the documentation
   and/or other materials provided with the distribution.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE
FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
---- 
-->

<!DOCTYPE html>
<html lang="en">


<head>
  <title>Cloud-Barista Tumblebug Map Dashboard</title>
  <!-- Polyfill for older environments like Internet Explorer and Android 4.x -->
  <script
    src="https://polyfill.io/v3/polyfill.min.js?features=requestAnimationFrame,Element.prototype.classList,URL"></script>

  <!-- Bootstrap CSS and JS (with Popper.js for popovers and tooltips) -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css"
    integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js"
    integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
    integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.min.js"
    integrity="sha384-+sLIOodYLS7CIrQpBjl+C7nPvqq+FbNUBDunl/OZv93DB7Ln/533i8e/mZXLi/P+"
    crossorigin="anonymous"></script>

  <!-- json-formatter-js -->
  <script src="https://cdn.jsdelivr.net/npm/json-formatter-js@2.3.4/dist/json-formatter.umd.min.js"></script>

  <style>
    .map {
      width: 100%;
      height: 100%;
      /* height:800px; */
    }

    body {
      /* transform: scale(0.8);
      transform-origin: 0 0;
      width: 125%; */
      margin-right: auto;
      margin-left: auto;
      overflow: auto;
    }

    .scrollable-column {
      height: 100%;
      overflow-y: auto;
    }


    table {
      border-collapse: separate;
      border-spacing: 0 2px;
    }

    table td {
      width: 160px;
    }

    .form-group {
      min-width: 200px;
    }

    .input-group-text {
      min-width: 93px;
      height: 38.5px;

    }

    .form-control {
      height: 38.5px;
    }

    .card {
      font-size: 1.1rem;
    }

    /* dropdown button style */
    .dropdown-menu {
      width: 98%;
      font-size: 1.2rem;
    }

    .dropdown-menu a {
      border-bottom: 1px solid #b4b4b4;
      padding: 20px;
    }

    .dropdown-menu a:hover {
      background-color: #98ed90;

    }
  </style>
</head>

<body>
  <div class="container-fluid">
    <!-- <h3 class="my-1">CB-Tumblebug Map Dashboard</h3> -->

    <div class="row">
      <!-- Left Column for Cards -->
      <div class="col-md-3 scrollable-column">


        <!-- Configuration Card -->
        <div class="card mb-2">
          <div class="card-header">Dashboard Configuration</div>
          <div class="card-body d-flex flex-column">
            <form id="configuration-form" class="form-row">
              <div class="form-group col">
                <div class="input-group">
                  <div class="input-group-prepend">
                    <span class="input-group-text">IP</span>
                  </div>
                  <input type="text" class="form-control" id="hostname" name="hostname" value="localhost"
                    onchange="endpointChanged();">
                </div>
              </div>
              <div class="form-group col">
                <div class="input-group">
                  <div class="input-group-prepend">
                    <span class="input-group-text">Port</span>
                  </div>
                  <input type="text" class="form-control" id="port" name="port" value="1323">
                </div>
              </div>
              <div class="form-group col">
                <div class="input-group">
                  <div class="input-group-prepend">
                    <span class="input-group-text">Username</span>
                  </div>
                  <input type="text" class="form-control" id="username" name="username" value="default">
                </div>
              </div>
              <div class="form-group col">
                <div class="input-group">
                  <div class="input-group-prepend">
                    <span class="input-group-text">Password</span>
                  </div>
                  <input type="password" class="form-control" id="password" name="password" value="default">
                </div>
              </div>

              <div class="form-group col">
                <div class="input-group">
                  <div class="input-group-prepend">
                    <span class="input-group-text" id="refreshIntervalLabel">Refresh(s)</span>
                  </div>
                  <select id="refreshInterval" name="refreshInterval" class="form-control" aria-label="Display Interval"
                    aria-describedby="refreshIntervalLabel">
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="5" selected="selected">5</option>
                    <option value="10">10</option>
                    <option value="20">20</option>
                    <option value="50">50</option>
                    <option value="100">100</option>
                  </select>
                </div>
              </div>

              <!-- X-Request-Id list -->
              <div class="form-group col">
                <div class="input-group">
                  <div class="input-group-prepend">
                    <span class="input-group-text" id="xRequestIdLabel">Req Log</span>
                  </div>
                  <select id="xRequestIdSelect" name="xRequestId" class="form-control" aria-label="X-Request-Id"
                    aria-describedby="xRequestIdLabel" onchange="handleRequestIdSelection();">
                    <option value="">Select ID</option>
                    <!-- Options will be filled dynamically -->
                  </select>
                </div>
              </div>

              <div class="form-group col dropdown">
                <button class="btn btn-secondary dropdown-toggle w-100" type="button" id="mapControlDropdown"
                  data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  Map Control
                </button>
                <div class="dropdown-menu" aria-labelledby="mapControlDropdown">
                  <a class="dropdown-item" href="javascript:void(0)" onclick="getConnection();">Show all Clouds</a>
                  <a class="dropdown-item" href="javascript:void(0)" onclick="hideMCIS();">Hide/Show MCIS</a>
                  <a class="dropdown-item" href="javascript:void(0)" onclick="clearMap();">Clear Map</a>
                  <a class="dropdown-item" href="javascript:void(0)" onclick="toggleView();">Toggle Map/API</a>
                </div>
              </div>

              <!-- Create toggleView Field -->
              <div class="form-group col">
                <button type="button" onClick="toggleView();" class="btn btn-info w-100">Toggle Map/API</button>
              </div>

            </form>
          </div>
        </div>


        <!-- MCIS Provisioning Card -->
        <div class="card mb-2">
          <div class="card-header">MCIS Provisioning</div>
          <div class="card-body d-flex flex-column">
            <form id="mcis-configuration-form" class="form-row">
              <!-- Recommendation Policy Field -->
              <div class="form-group col">
                <div class="input-group">
                  <div class="input-group-prepend">
                    <span class="input-group-text">Policy</span>
                  </div>
                  <select id="recommendPolicy" name="recommendPolicy" class="form-control">
                    <option value="location" selected="selected">Location-based</option>
                    <option value="price">Cost-based</option>
                    <option value="performance">Performance-based</option>
                  </select>
                </div>
              </div>

              <!-- OS Image Type Field -->
              <div class="form-group col">
                <div class="input-group">
                  <div class="input-group-prepend">
                    <span class="input-group-text">OS Image</span>
                  </div>
                  <select id="osImage" name="osImage" class="form-control">
                    <option value="Ubuntu18.04" selected="selected">Ubuntu 18.04</option>
                    <option value="Ubuntu22.04">Ubuntu 22.04</option>
                    <option value="Debian10">Debian 10</option>
                    <option value="WindowsServer2012R2">Windows 2012 R2</option>
                  </select>
                </div>
              </div>

              <!-- Disk Size Field -->
              <div class="form-group col">
                <div class="input-group">
                  <div class="input-group-prepend">
                    <span class="input-group-text">Disk Size</span>
                  </div>
                  <input type="text" class="form-control" id="diskSize" name="diskSize" value="default">
                </div>
              </div>

              <!-- CPU Range Field -->
              <div class="form-group col">
                <div class="input-group">
                  <div class="input-group-prepend">
                    <span class="input-group-text">CPU(N)</span>
                  </div>
                  <input type="number" class="form-control m-0" id='minVCPU' value="1" min="1" max="448" step="1">
                  <span class="mx-1">~</span>
                  <input type="number" class="form-control m-0" id='maxVCPU' value="8" min="1" max="448" step="1">
                </div>
              </div>


              <!-- Memory Range Field -->
              <div class="form-group col">
                <div class="input-group">
                  <div class="input-group-prepend">
                    <span class="input-group-text">Mem(GB)</span>
                  </div>
                  <input type="number" class="form-control m-0" id='minRAM' value="0.5" min="0.5" max="12288"
                    step="0.5">
                  <span class="mx-1">~</span>
                  <input type="number" class="form-control m-0" id='maxRAM' value="8" min="0.5" max="12288" step="0.5">
                </div>
              </div>

              <!-- Clear Selection Field -->
              <div class="form-group col">
                <button type="button" onClick="clearCircle('clearText');" class="btn btn-secondary w-100">Clear
                  Configuration</button>
              </div>

              <!-- Create MCIS Field -->
              <div class="form-group col">
                <button type="button" id="createMcisButton" onClick="createMcis();" class="btn btn-primary w-100">Create
                  MCIS</button>
              </div>



            </form>
          </div>
        </div>

        <!-- MCIS Control Card -->
        <div class="card mb-2">
          <div class="card-header">MCIS Control</div>
          <div class="card-body d-flex flex-column">
            <form id="mcis-control-form" class="form-row">

              <!-- Namespace ID Field -->
              <div class="form-group col">
                <div class="input-group">
                  <div class="input-group-prepend">
                    <span class="input-group-text" id="namespaceLabel">NS ID</span>
                  </div>
                  <select id="namespace" name="namespace" class="form-control" aria-label="Namespace ID"
                    aria-describedby="namespaceLabel">
                    <!-- Options will be filled dynamically -->
                  </select>
                </div>
              </div>


              <!-- MCIS ID Field -->
              <div class="form-group col">
                <div class="input-group">
                  <div class="input-group-prepend">
                    <span class="input-group-text" id="mcisidLabel">MCIS ID</span>
                  </div>
                  <select id="mcisid" name="mcisid" class="form-control" aria-label="MCIS ID"
                    aria-describedby="mcisidLabel">
                    <!-- Options will be filled dynamically -->
                  </select>
                </div>
              </div>

              <!-- SubGroup ID Field -->
              <div class="form-group col">
                <div class="input-group">
                  <div class="input-group-prepend">
                    <span class="input-group-text" id="subgroupidLabel">Group ID</span>
                  </div>
                  <select id="subgroupid" name="subgroupid" class="form-control" aria-label="SubGroup ID"
                    aria-describedby="subgroupidLabel">
                    <!-- Options will be filled dynamically -->
                  </select>
                </div>
              </div>

              <!-- VM ID Field -->
              <div class="form-group col">
                <div class="input-group">
                  <div class="input-group-prepend">
                    <span class="input-group-text" id="vmidLabel">VM ID</span>
                  </div>
                  <select id="vmid" name="vmid" class="form-control" aria-label="VM ID" aria-describedby="vmidLabel">
                    <!-- Options will be filled dynamically -->
                  </select>
                </div>
              </div>

              <!-- VM Public IP Field -->
              <div class="form-group col">
                <div class="input-group">
                  <div class="input-group-prepend">
                    <span class="input-group-text" id="pubipLabel">Pub IP</span>
                  </div>
                  <select id="pubip" name="pubip" class="form-control" aria-label="Pub IP" aria-describedby="pubipLabel">
                    <!-- Options will be filled dynamically -->
                  </select>
                </div>
              </div>

              <!-- VM Private IP Field -->
              <div class="form-group col">
                <div class="input-group">
                  <div class="input-group-prepend">
                    <span class="input-group-text" id="priipLabel">Pri IP</span>
                  </div>
                  <select id="priip" name="priip" class="form-control" aria-label="Pri IP" aria-describedby="priipLabel">
                    <!-- Options will be filled dynamically -->
                  </select>
                </div>
              </div>


              <!-- Control Actions Dropdown -->
              <div class="form-group col dropdown">
                <button class="btn btn-primary dropdown-toggle w-100" type="button" id="controlActionsDropdown"
                  data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  Actions
                </button>
                <div class="dropdown-menu" aria-labelledby="controlActionsDropdown">
                  <a class="dropdown-item" href="javascript:void(0)" onClick="controlMCIS('suspend');">Suspend</a>
                  <a class="dropdown-item" href="javascript:void(0)" onClick="controlMCIS('resume');">Resume</a>
                  <a class="dropdown-item" href="javascript:void(0)" onClick="controlMCIS('reboot');">Reboot</a>
                  <a class="dropdown-item" href="javascript:void(0)" onClick="controlMCIS('refine');">Refine</a>
                  <a class="dropdown-item" href="javascript:void(0)" onClick="controlMCIS('terminate');">Terminate</a>
                </div>
              </div>

              <!-- NLB Control Dropdown -->
              <div class="form-group col dropdown">
                <button class="btn btn-primary dropdown-toggle w-100" type="button" id="nlbControlDropdown"
                  data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  NLB Control
                </button>
                <div class="dropdown-menu" aria-labelledby="nlbControlDropdown">
                  <a class="dropdown-item" href="javascript:void(0)" onClick="AddMcNLB();">Add Global-NLB</a>
                  <a class="dropdown-item" href="javascript:void(0)" onClick="AddNLB();">Add Regional-NLB</a>
                  <a class="dropdown-item" href="javascript:void(0)" onClick="DelNLB();">Del Regional-NLB</a>
                </div>
              </div>

              <!-- Status Field -->
              <div class="form-group col">
                <input type="button" value="Status" onClick="statusMCIS();" class="btn btn-info w-100">
              </div>

              <!-- Delete Field -->
              <div class="form-group col">
                <input type="button" value="Delete" onClick="deleteMCIS();" class="btn btn-secondary w-100">
              </div>


            </form>
          </div>
        </div>

        <!-- Resource view Card -->
        <div class="card mb-2">
          <div class="card-header">Resource View</div>
          <div class="card-body d-flex flex-column">
            <form id="resource-view-form" class="form-row">


              <!-- vNet ID Field -->
              <div class="form-group col">
                <div class="input-group">
                  <div class="input-group-prepend">
                    <span class="input-group-text" id="vNetLabel">VNet</span>
                  </div>
                  <select id="vNet" name="vNet" class="form-control" aria-label="vNet ID" aria-describedby="vNetLabel">
                    <!-- Options will be filled dynamically -->
                  </select>
                </div>
              </div>

              <!-- securityGroup Field -->
              <div class="form-group col">
                <div class="input-group">
                  <div class="input-group-prepend">
                    <span class="input-group-text" id="securityGroupLabel">Security</span>
                  </div>
                  <select id="securityGroup" name="securityGroup" class="form-control" aria-label="securityGroup ID"
                    aria-describedby="securityGroupLabel">
                    <!-- Options will be filled dynamically -->
                  </select>
                </div>
              </div>


              <!-- sshKey Field -->
              <div class="form-group col">
                <div class="input-group">
                  <div class="input-group-prepend">
                    <span class="input-group-text" id="sshKeyLabel">SSHKey</span>
                  </div>
                  <select id="sshKey" name="sshKey" class="form-control" aria-label="sshKey ID"
                    aria-describedby="sshKeyLabel">
                    <!-- Options will be filled dynamically -->
                  </select>
                </div>
              </div>

              <!-- image Field -->
              <div class="form-group col">
                <div class="input-group">
                  <div class="input-group-prepend">
                    <span class="input-group-text" id="imageLabel">Image</span>
                  </div>
                  <select id="image" name="image" class="form-control" aria-label="image ID"
                    aria-describedby="imageLabel">
                    <!-- Options will be filled dynamically -->
                  </select>
                </div>
              </div>

              <!-- spec Field -->
              <div class="form-group col">
                <div class="input-group">
                  <div class="input-group-prepend">
                    <span class="input-group-text" id="specLabel">Spec</span>
                  </div>
                  <select id="spec" name="spec" class="form-control" aria-label="spec ID" aria-describedby="specLabel">
                    <!-- Options will be filled dynamically -->
                  </select>
                </div>
              </div>

              <!-- connection Field -->
              <div class="form-group col">
                <div class="input-group">
                  <div class="input-group-prepend">
                    <span class="input-group-text" id="connectionLabel">Connect</span>
                  </div>
                  <select id="connection" name="connection" class="form-control" aria-label="connection ID"
                    aria-describedby="connectionLabel">
                    <!-- Options will be filled dynamically -->
                  </select>
                </div>
              </div>

              <!-- Resource Control Field -->
              <div class="form-group col dropdown">
                <button class="btn btn-primary dropdown-toggle w-100" type="button" id="resourceControlDropdown"
                  data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  Resource Control
                </button>
                <div class="dropdown-menu" aria-labelledby="resourceControlDropdown">
                  <a class="dropdown-item" href="javascript:void(0)" onClick="releaseResources();">Release Used
                    Resources</a>
                  <a class="dropdown-item" href="javascript:void(0)" onClick="resourceOverview();">Overview
                    Resources</a>
                  <a class="dropdown-item" href="javascript:void(0)" onClick="registerCspResource();">Register Existing
                    Resources</a>
                </div>
              </div>


            </form>
          </div>
        </div>




        <!-- MCIS Application Card -->
        <div class="card mb-2">
          <div class="card-header">MCIS Application</div>
          <div class="card-body d-flex flex-column">
            <form id="mcis-application-form" class="form-row">

              <!-- Select Application Field -->
              <div class="form-group col">
                <div class="input-group">
                  <div class="input-group-prepend">
                    <span class="input-group-text" id="selectAppLabel">Select App</span>
                  </div>
                  <select id="selectApp" name="selectApp" class="form-control" aria-label="Select Application"
                    aria-describedby="selectAppLabel">
                    <option value="Xonotic" selected="selected">FPSGame(Xonotic)</option>
                    <option value="ELK">LogAnalisys(ELK)</option>
                    <option value="Westward">MMORPG(Westward)</option>
                    <option value="Nginx">WebServer(Nginx)</option>
                    <option value="WeaveScope">Monitor(WeaveScope)</option>
                    <option value="Jitsi">VideoConf(Jitsi)</option>
                    <option value="Stress">LoadTest(Stress)</option>
                  </select>
                </div>
              </div>

              <!-- Application Control Buttons -->
              <div class="form-group col dropdown">
                <button class="btn btn-primary dropdown-toggle w-100" type="button" id="appControlDropdown"
                  data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  App Control
                </button>

                <div class="dropdown-menu" aria-labelledby="appControlDropdown">
                  <a class="dropdown-item" href="javascript:void(0)" onClick="startApp();">Start App</a>
                  <a class="dropdown-item" href="javascript:void(0)" onClick="stopApp();">Stop App</a>
                  <a class="dropdown-item" href="javascript:void(0)" onClick="statusApp();">Status App</a>
                </div>
              </div>


              <!-- MCIS Access Field -->
              <div class="form-group col dropdown">
                <button class="btn btn-info dropdown-toggle w-100" type="button" id="accessDropdown"
                  data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  Get Access
                </button>
                <div class="dropdown-menu" aria-labelledby="accessDropdown">
                  <a class="dropdown-item" href="javascript:void(0)" onClick="getAccessInfo();">Get Access Info</a>
                  <a class="dropdown-item save-file" href="javascript:void(0)">Save SSH Key</a>
                  <a class="dropdown-item" href="javascript:void(0)" onClick="executeRemoteCmd();">Remote Command</a>
                </div>
              </div>


              <!-- Remote Command Field -->
              <div class="form-group col">
                <button type="button" id="remoteCmd" onClick="executeRemoteCmd();" class="btn btn-warning w-100">Remote
                  Command</button>
              </div>

            </form>
          </div>
        </div>
        <!-- Message Area -->
        <div class="card mb-2">
          <div class="card-header">Message Area</div>
          <div class="card-body d-flex flex-column">
            <div class="row">
              <div class="col-md-12">
                <textarea id="message" rows="3" name="message" readonly class="form-control"></textarea>
              </div>
              <!-- <div class="col-md-3">
                <div class="form-check mb-2">
                  <label class="form-check-label" for="tableOn">Display table</label>
                  <input type="checkbox" class="form-check-input" id="tableOn" name="tableOn"
                    onClick="displayTableOn();" value="on">
                </div>
              </div> -->
              <div class="col-md-12">
                <div id="jsonoutput" class="form-control" readonly style="height: auto; background-color: black; word-wrap: break-word; overflow-wrap: break-word; overflow-x: auto;"></div>
              </div>
            </div>
          </div>
        </div>

        <!-- Detail Table 
        <div class="card mb-2">
          <div class="card-header">Detail Table</div>
          <div class="card-body d-flex flex-column">
            <table id="detailTable" border="1" style="text-align:center; width:1111px" class="table table-bordered">
               ... (Table headers and data rows) ... 
            </table>
          </div>
        </div>-->

      </div>

      <!-- Right Column for Map or API-->
      <div class="col-md-9">
        <div id="map" class="map" style="display:block;">
          <div id="popup"></div>

          <!-- Spinner for request status -->
          <div id="spinner-container"
            style="display: none; position: absolute; bottom: 10px; left: 20px; z-index: 1000; align-items: center;">
            <div class="spinner-border text-primary spinner-border-sm " role="status">
              <span class="sr-only">Loading...</span>
            </div>
            <div id="spinner-text"
              style="margin-left: 10px; background-color: #00ba06; color: white; padding: 5px 10px; border-radius: 4px;">
              ...
            </div>
          </div>

        </div>
        <iframe id="iframe" src="http://localhost:1323/tumblebug/swagger/index.html"
          style="visibility:hidden; width:100%; height:100%; position:absolute; top:0; left:0;"></iframe>

      </div>

    </div>


    <script type="module" src="./index.js"></script>
    <script type="text/javascript">
      function toggleView() {
        var map = document.getElementById('map');
        var iframe = document.getElementById('iframe');

        if (iframe.style.visibility === "hidden") {
          map.style.display = "none";
          iframe.style.visibility = "visible";
          iframe.style.position = "static";
        } else {
          map.style.display = "block";
          iframe.style.visibility = "hidden";
          iframe.style.position = "absolute";
        }
      }
    </script>

    <script type="text/javascript">
      window.addEventListener('resize', setColumnHeight);

      function setColumnHeight() {
        var windowHeight = window.innerHeight;
        document.querySelector('.scrollable-column').style.height = windowHeight * 1.0 + 'px';
      }

      setColumnHeight();
    </script>

    <script type="text/javascript">
      document.addEventListener('DOMContentLoaded', (event) => {
        // event linster for copy to clipboard
        document.querySelectorAll('.input-group-text').forEach(label => {
          label.addEventListener('click', () => {
            // get seleted option
            const select = label.parentElement.nextElementSibling;
            if (select && select.options[select.selectedIndex]) {
              var toCopy = select.options[select.selectedIndex].text;
              var labelText = label.textContent || label.innerText;
              navigator.clipboard.writeText(toCopy)
                .then(() => {
                  console.log('Text copied to clipboard: ' + toCopy);
                  document.getElementById('message').value = '[' + labelText + ' to Clipboard]\n' + toCopy;
                })
                .catch(err => {
                  console.error('Error in copying text: ', err);
                  document.getElementById('message').value = '[Error in copying to Clipboard]\nLabel: ' + labelText + '\nError: ' + err;
                });
            }
          });
        });
      });

    </script>

</body>

</html>